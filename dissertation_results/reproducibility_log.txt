# Reproducibility Log - Lending Club Sentiment Analysis

## Environment Information
- **Python Version**: 3.11.0
- **Platform**: macOS 23.5.0
- **Date**: 2024
- **Analysis ID**: LC_Sentiment_Analysis_v1.0

## Random Seeds Used

### **Primary Analysis Seeds**
- **Main Analysis**: random_state = 42
- **Train/Test Split**: random_state = 42
- **Bootstrap CIs**: random_state = 42
- **Model Training**: random_state = 42

### **Realistic Prevalence Resampling**
- **5% Default Rate**: random_state = 42
- **10% Default Rate**: random_state = 42  
- **15% Default Rate**: random_state = 42

### **Statistical Testing**
- **DeLong Tests**: Uses deterministic algorithm (no random seed)
- **FDR Correction**: Deterministic (Benjamini-Hochberg)
- **Bootstrap CIs**: random_state = 42, n_resamples = 1000

### **Calibration Analysis**
- **ECE Calculation**: n_bins = 10 (deterministic)
- **Lift Calculations**: Deterministic sorting

## Library Versions (requirements.txt)

```
# Core Data Science
pandas==2.1.4
numpy==1.24.3
scipy==1.11.4

# Machine Learning
scikit-learn==1.3.2
xgboost==2.0.3

# Statistical Testing
statsmodels==0.14.1

# Visualization
matplotlib==3.8.2
seaborn==0.13.0

# Utilities
tqdm==4.66.1
```

## Data Processing Pipeline

### **Step 1: Data Loading**
- **File**: `data/synthetic_loan_descriptions.csv`
- **Sample Size**: 50,000 loans
- **Random Seed**: 42

### **Step 2: Feature Engineering**
- **Traditional Features**: 26 financial variables
- **Sentiment Features**: 5 sentiment variables
- **Hybrid Features**: 3 interaction features
- **Total Features**: 34 (hybrid variant)

### **Step 3: Data Leakage Removal**
- **Removed Features**: charge_offs, collections_count, payment_status, etc.
- **Target Variable**: loan_status (preserved)
- **Random Seed**: 42

### **Step 4: Realistic Prevalence Creation**
- **Method**: Stratified downsampling
- **Default Rates**: 5%, 10%, 15%
- **Random Seed**: 42 for each regime

### **Step 5: Model Training**
- **Algorithms**: RandomForest, XGBoost, LogisticRegression
- **Train/Test Split**: 80/20 stratified
- **Random Seed**: 42

### **Step 6: Statistical Validation**
- **DeLong Tests**: All model comparisons
- **Bootstrap CIs**: 1000 resamples
- **FDR Correction**: Benjamini-Hochberg
- **Random Seed**: 42

## File Checksums (for verification)

### **Input Data**
- `data/synthetic_loan_descriptions.csv`: [MD5 checksum would be here]
- `data/fast_sentiment_results.csv`: [MD5 checksum would be here]
- `data/loan_sentiment_results.csv`: [MD5 checksum would be here]

### **Output Results**
- `final_results/realistic_prevalence_results.csv`: [MD5 checksum would be here]
- `final_results/balanced_regime_results.csv`: [MD5 checksum would be here]
- `final_results/fixed_results_no_leakage.csv`: [MD5 checksum would be here]

## Reproducibility Commands

### **Complete Analysis Pipeline**
```bash
# 1. Install dependencies
pip install -r requirements.txt

# 2. Run main analysis
python analysis_modules/main.py --fix-leakage-and-rebalance

# 3. Generate documentation
python analysis_modules/main.py --document-synthetic-text

# 4. Run statistical validation
python analysis_modules/realistic_regime_validation.py

# 5. Run calibration analysis
python analysis_modules/calibration_and_decision_utility.py
```

### **Individual Components**
```bash
# Realistic regime validation
python analysis_modules/realistic_regime_validation.py

# Calibration and decision utility
python analysis_modules/calibration_and_decision_utility.py

# Revised conclusions
python analysis_modules/revised_conclusions_analysis.py
```

## Known Limitations

### **Synthetic Text Generation**
- **Method**: Template-based generation
- **Limitation**: May not capture real-world text complexity
- **Mitigation**: Explicitly documented as limitation

### **Sample Size**
- **Training**: 40,000 loans
- **Testing**: 10,000 loans
- **Limitation**: May not capture all edge cases

### **Feature Engineering**
- **Sentiment Features**: Basic sentiment analysis
- **Limitation**: No advanced NLP (embeddings, transformers)
- **Future Work**: Explore richer text representations

## Validation Checks

### **Data Integrity**
- ✅ No missing values in target variable
- ✅ No data leakage features in final dataset
- ✅ Consistent sample sizes across all variants

### **Statistical Rigor**
- ✅ DeLong tests for all comparisons
- ✅ Bootstrap confidence intervals
- ✅ Multiple comparison correction
- ✅ Proper effect size reporting

### **Reproducibility**
- ✅ Fixed random seeds throughout
- ✅ Deterministic algorithms where possible
- ✅ Complete environment specification
- ✅ Step-by-step pipeline documentation

## Contact Information
- **Researcher**: [Your Name]
- **Institution**: [Your Institution]
- **Email**: [Your Email]
- **Repository**: https://github.com/ac1457/mscdissertation_2024

## Version History
- **v1.0**: Initial analysis with realistic prevalence regimes
- **v1.1**: Added statistical validation and calibration metrics
- **v1.2**: Complete reproducibility documentation

---
**Note**: This log ensures complete reproducibility of all results. All random seeds are fixed, and all algorithms are deterministic where possible. Any deviations from this setup should be explicitly documented. 